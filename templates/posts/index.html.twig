{% extends 'base.html.twig' %}

{% block title %} {{ post.title }} {% endblock %}

{% block body %}
    <div class="container-fluid mx-auto mt-5 px-3">
        <h1 class="text-xxl-start fa-font-awesome mb-4">{{ post.title }}</h1>
        <p class="fst-italic">Publi√© le {{ post.createdAt|date('d/m/Y') }} par {{ post.author }}</p>
        <div class="mt-4">
            <p>{{ post.content|nl2br }}</p>
        </div>
        <p class="mt-5 text-decoration-underline">
            <a href="{{ path('app_actus') }}">‚Üê Retour aux articles</a>
        </p>
    </div>

    <h2>Commentaires</h2>

    {% if app.user %}
        {{ form_start(commentForm) }}
        {{ form_row(commentForm.content) }}
        {{ form_row(commentForm.submit) }}
        {{ form_end(commentForm) }}
    {% else %}
        <p><a href="{{ path('app_login') }}">Connectez-vous</a> pour poster un commentaire.</p>
    {% endif %}

    {{ dump(comments) }}
    {% for comment in comments %}
        <div class="border p-3 mt-3">
            <p><strong>{{ comment.user.username }}</strong> - <small>{{ comment.createdAt|date('d/m/Y H:i') }}</small></p>
            <p>{{ comment.content }}</p>
            <form action="{{ path('app_comment_report', {'id': comment.id}) }}" method="post" class="d-inline">
                <button type="submit" class="btn btn-sm btn-warning">üö® Signaler</button>
            </form>
        </div>
    {% else %}
        <p>Aucun commentaire pour l'instant.</p>
    {% endfor %}

    <p>Un commentaire d√©plaisant? Signalez-le!</p>
{% endblock %}